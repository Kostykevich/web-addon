# Assistant HELPER

**Версия:** 1.0.0  
**Manifest V3**  

Assistant HELPER — это расширение для браузера, которое автоматизирует работу с Google-поиском и сайтом [kinogo.online](https://kinogo.online), а также отправляет информацию о посещённых страницах на локальный сервер.

---

## Возможности

1. **Ping-сервер при установке и запуске**
   - При установке или запуске расширения отправляется POST-запрос на локальный сервер:
     ```
     http://127.0.0.1:48123/ping_extension
     ```
   - Тело запроса: 
     ```json
     { "installed": true, "version": "1.0.0" }
     ```
   - Это позволяет серверу отслеживать активность расширения.

2. **Отслеживание посещённых страниц**
   - Каждое завершённое посещение страниц HTTP/HTTPS отправляется на локальный сервер:
     ```
     http://127.0.0.1:48123/page_visited
     ```
   - Тело запроса:
     ```json
     { "url": "URL_страницы", "timestamp": 1234567890 }
     ```
   - Исключены внутренние страницы браузера (`chrome://`, `file://`).

3. **Автопереход на Kinogo из Google-поиска**
   - Если поисковый запрос Google содержит `site:kinogo`, расширение автоматически переходит по первой ссылке на фильм.
   - Для общего поиска с маркером `#ext_data:assistant` расширение ищет «подходящие» ссылки и автоматически переходит по первой из них, игнорируя ссылки на Google, аккаунты, справку и политики.

4. **Взаимодействие с kinogo.online**
   - После перехода на страницу фильма с Google, расширение прокручивает страницу к плееру фильма.
   - Через 2 секунды отправляется POST-запрос на локальный сервер:
     ```
     http://127.0.0.1:5000/play_film
     ```
   - Сервер получает уведомление о начале воспроизведения.

---

## Структура файлов

- **`background.js`** — Service Worker расширения. Отвечает за установку, запуск и отправку информации о посещениях на сервер.  
- **`content.js`** — Скрипт контента, работающий на страницах Google и kinogo.online для автопереходов и прокрутки к плееру.  
- **`manifest.json`** — Файл манифеста расширения, описывает права, скрипты и разрешения.

---

## Разрешения

- `activeTab`, `scripting`, `webNavigation`  
- Доступ к локальному серверу:
    ```
    127.0.0.1
    ```

---

## Установка

1. Скачайте или склонируйте репозиторий.  
2. Откройте Chrome → `chrome://extensions/`  
3. Включите "Режим разработчика".  
4. Нажмите "Загрузить распакованное расширение" и выберите папку с файлами расширения.  
5. Расширение готово к использованию.

---

## Настройка локального сервера

Для корректной работы расширения необходим локальный сервер с двумя маршрутами:

1. **`POST /ping_extension`**  
 - Получает JSON с информацией об установке и версии.  

2. **`POST /page_visited`**  
 - Получает JSON с URL посещённых страниц и временной меткой.  

3. **`POST /play_film`** (по желанию)  
 - Получает уведомление о начале воспроизведения фильма на kinogo.online.

---

## Логирование

- Вся работа расширения выводится в консоль браузера для отладки.  
- Выводятся события:
- Переход по ссылкам
- Найденные и пропущенные ссылки
- Скролл к плееру
- Ответы локального сервера

---

## Контакты

Создано для автоматизации просмотра и отслеживания контента.